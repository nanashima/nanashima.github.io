:root{
  /* Base paper + ink */
  --paper:#f7f2e8;
  --paper-2:#fbf8f2;
  --ink:#141414;
  --muted:rgba(20,20,20,.72);

  --indigo:#1c2a4a;
  --indigo-2:#0f1b33;

  --gold-rgb:200,162,74;
  --gold:#c8a24a;
  --gold-deep:#b0842a;

  --line:rgba(28,42,74,.16);
  --shadow:0 18px 46px rgba(15,27,51,.14);
  --radius:0px;
  --cut:22px;
  --cut-sm:12px;
  --content:980px;

  /* Seasonal tokens (default: winter) */
  --spot1:28,42,74;      /* indigo */
  --spot2:155,47,80;     /* plum */
  --spot3:207,215,230;   /* silver */

  --backdrop:url('backdrop-winter.svg');
  --rinpa-pattern:url('pattern-winter.svg');
  --motif:url('motif-winter.svg');

  /* Textures */
  --washi:url('tex-washi.svg');
  --goldtex:url('tex-gold.svg');

  --accent:rgba(var(--spot2),1);
  --accent-soft:rgba(var(--spot2),.16);
  --accent-strong:rgba(var(--spot2),.30);

  /* Links (season-aware, Rinpa harmony) */
  --link-rgb:86,46,70;              /* fallback: plum-ink */
  --link-pigment:155,47,80;         /* primary pigment */
  --link-pigment-2:28,42,74;        /* secondary pigment */

}

/* =========================
   Seasons (auto via JS)
   ========================= */
html[data-season="spring"]{
  --paper:#f9f1ea;
  --paper-2:#fdf9f5;
  --spot1:216,112,136;   /* sakura */
  --spot2:122,90,168;    /* wisteria */
  --spot3:107,141,75;    /* fresh green */
  --backdrop:url('backdrop-spring.svg');
  --rinpa-pattern:url('pattern-spring.svg');
  --motif:url('motif-spring.svg');
  --accent:rgba(var(--spot1),1);
  --accent-soft:rgba(var(--spot1),.16);
  --accent-strong:rgba(var(--spot1),.30);
  --link-rgb:72,62,94;              /* smoky wisteria */
  --link-pigment:122,90,168;         /* wisteria */
  --link-pigment-2:216,112,136;      /* sakura */
}

html[data-season="summer"]{
  --paper:#f4f3eb;
  --paper-2:#faf9f1;
  --spot1:32,83,157;     /* indigo blue */
  --spot2:59,138,122;    /* teal */
  --spot3:106,88,168;    /* iris violet */
  --backdrop:url('backdrop-summer.svg');
  --rinpa-pattern:url('pattern-summer.svg');
  --motif:url('motif-summer.svg');
  --accent:rgba(var(--spot1),1);
  --accent-soft:rgba(var(--spot1),.16);
  --accent-strong:rgba(var(--spot1),.30);
  --link-rgb:29,49,89;              /* deep indigo ink */
  --link-pigment:32,83,157;          /* indigo */
  --link-pigment-2:59,138,122;       /* teal */
}

html[data-season="autumn"]{
  --paper:#f7f0e6;
  --paper-2:#fcf7f0;
  --spot1:194,74,50;     /* maple */
  --spot2:183,134,50;    /* ochre */
  --spot3:106,107,58;    /* olive */
  --backdrop:url('backdrop-autumn.svg');
  --rinpa-pattern:url('pattern-autumn.svg');
  --motif:url('motif-autumn.svg');
  --accent:rgba(var(--spot1),1);
  --accent-soft:rgba(var(--spot1),.16);
  --accent-strong:rgba(var(--spot1),.30);
  --link-rgb:96,57,48;              /* burnt umber */
  --link-pigment:194,74,50;          /* maple */
  --link-pigment-2:183,134,50;       /* ochre */

}

html[data-season="winter"]{
  --paper:#f3f4f6;
  --paper-2:#fbfbfc;
  --spot1:28,42,74;      /* indigo */
  --spot2:155,47,80;     /* plum */
  --spot3:207,215,230;   /* silver */
  --backdrop:url('backdrop-winter.svg');
  --rinpa-pattern:url('pattern-winter.svg');
  --motif:url('motif-winter.svg');
  --accent:rgba(var(--spot2),1);
  --accent-soft:rgba(var(--spot2),.16);
  --accent-strong:rgba(var(--spot2),.30);
  --link-rgb:86,46,70;              /* plum ink */
  --link-pigment:155,47,80;          /* plum */
  --link-pigment-2:28,42,74;         /* indigo */
}

/* =========================
   Base
   ========================= */
*{ box-sizing:border-box; }
html{ scroll-behavior:smooth; }

body,html{
  margin:0;
  padding:0;
  font-family:'Noto Sans JP', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
              "Hiragino Sans", "Hiragino Kaku Gothic ProN", "Yu Gothic", Meiryo, sans-serif;
  color:var(--ink);
  line-height:1.72;
}

body{
  min-height:100vh;
  background:var(--paper);
}

/* Background canvas (texture-first) */
.site-bg{
  position:fixed;
  inset:0;
  z-index:-1;
  background-color:var(--paper);
  background-image:
    var(--backdrop),
    radial-gradient(1400px circle at 22% 14%, rgba(var(--spot1),.22), transparent 62%),
    radial-gradient(980px circle at 86% 0%, rgba(var(--spot2),.18), transparent 58%),
    radial-gradient(740px circle at 72% 92%, rgba(var(--spot3),.12), transparent 60%);
  background-repeat:no-repeat, no-repeat, no-repeat, no-repeat;
  background-size:cover, auto, auto, auto;
  background-position:top center, 0 0, 100% 0, 100% 100%;

  isolation:isolate;
}

.site-bg::before{
  content:"";
  position:absolute;
  inset:0;
  background-image:var(--washi);
  background-repeat:repeat;
  background-size:720px 720px;
  opacity:.55;
  mix-blend-mode:multiply;
  pointer-events:none;

  z-index:2;
}

.site-bg::after{
  content:"";
  position:absolute;
  inset:0;
  background-image:var(--rinpa-pattern), var(--goldtex);
  background-repeat:repeat, repeat;
  background-size:1200px 1200px, 512px 512px;
  background-position:center, center;
  opacity:.28;
  mix-blend-mode:multiply;
  pointer-events:none;

  z-index:3;
}


.motif-layer{
  position:absolute;
  inset:0;
  background-image:var(--motif);
  background-repeat:no-repeat;
  background-size:cover;
  background-position:center;
  /* Hoitsu motifs: visible enough to feel concrete, but still printed-on-paper */
  opacity:.72;
  mix-blend-mode:multiply;
  filter:saturate(1.08) contrast(1.10);
  pointer-events:none;

  z-index:1;
}

/* Selection */
::selection{ background:rgba(var(--spot1),.22); }

/* =========================
   Header (crisp, legible)
   ========================= */
.site-header{
  padding:78px 18px 44px;
  text-align:center;
}

.header-panel{
  width:min(92%, var(--content));
  margin:0 auto;
  padding:22px 22px 18px;
  border-radius:0;
  border:1px solid rgba(var(--gold-rgb),.42);
  background:rgba(255,255,255,.70);
  box-shadow:0 22px 64px rgba(15,27,51,.16);
  position:relative;
  overflow:hidden;
}

.header-panel::before{
  content:"";
  position:absolute;
  inset:-1px;
  background-image:var(--washi);
  background-size:720px 720px;
  opacity:.22;
  mix-blend-mode:multiply;
  pointer-events:none;
}

.header-panel::after{
  content:"";
  position:absolute;
  left:0;
  right:0;
  top:0;
  height:10px;
  background:linear-gradient(90deg,
    rgba(var(--gold-rgb),.72),
    rgba(var(--spot1),.34),
    rgba(var(--gold-rgb),.72));
  opacity:.92;
  pointer-events:none;
}

/* Summer: soften the blue ↔ gold (orange) transition by bridging with teal */
html[data-season="summer"] .header-panel::after{
  background:linear-gradient(90deg,
    rgba(var(--gold-rgb),.62),
    rgba(var(--spot2),.24),
    rgba(var(--spot1),.26),
    rgba(var(--spot2),.24),
    rgba(var(--gold-rgb),.62));
  opacity:.90;
}

.header-panel > *{
  position:relative;
  z-index:1;
}

.season-badge{
  display:inline-flex;
  align-items:center;
  gap:10px;
  padding:8px 14px;
  border-radius:0;
  border:1px solid rgba(var(--gold-rgb),.46);
  background:rgba(255,255,255,.78);
  box-shadow:0 14px 30px rgba(15,27,51,.10);
}

.season-name{
  font-family:'Kaisei Opti','Noto Serif JP',"Yu Mincho","Hiragino Mincho ProN",serif;
  letter-spacing:.10em;
  font-weight:600;
  color:var(--indigo-2);
}

.season-sep{
  opacity:.55;
}

.season-motif{
  font-size:.92rem;
  color:var(--muted);
}

.site-header h1{
  margin:14px 0 6px;
  font-family:'Kaisei Opti','Noto Serif JP',"Yu Mincho","Hiragino Mincho ProN",serif;
  font-size:clamp(2.1rem, 4vw, 3.3rem);
  letter-spacing:.04em;
  color:var(--indigo-2);
}

.name-line{
  margin:0 0 10px;
  color:var(--muted);
}

.name-ja{
  display:inline-block;
  margin:0;
  padding-left:.06em;
  font-family:'Kaisei Opti','Noto Serif JP',"Yu Mincho","Hiragino Mincho ProN","Hiragino Mincho Pro",serif;
  font-size:1.02rem;
  letter-spacing:.12em;
  font-weight:600;
  color:inherit;
}


.header-meta{
  margin:0;
  font-size:1rem;
  color:var(--muted);
}

/* =========================
   Navigation
   ========================= */
nav{
  position:sticky;
  top:0;
  z-index:20;
  backdrop-filter: blur(10px) saturate(1.15);
  -webkit-backdrop-filter: blur(10px) saturate(1.15);
  background:rgba(255,255,255,.64);
  border-top:1px solid rgba(var(--gold-rgb),.18);
  border-bottom:1px solid rgba(28,42,74,.14);
}

nav::before{
  content:"";
  position:absolute;
  inset:0;
  background-image:var(--rinpa-pattern);
  background-size:1200px 1200px;
  opacity:.10;
  pointer-events:none;
  mix-blend-mode:multiply;
}

nav ul{
  list-style:none;
  margin:0;
  padding:12px 16px;
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  gap:6px 10px;
  position:relative;
}

nav ul li{ margin:0; }

nav ul li a{
  display:block;
  padding:10px 12px;
  border-radius:0;
  position:relative;
  overflow:hidden;

  /* ink first, pigment second (subtle) */
  color:rgb(var(--link-rgb));
  color: color-mix(in srgb, var(--indigo-2) 86%, rgba(var(--link-pigment),1) 14%);
  text-decoration:none;

  font-weight:650;
  font-size:.95rem;
  letter-spacing:.02em;

  background:rgba(255,255,255,.28);
  border:1px solid rgba(var(--gold-rgb),.20);
  box-shadow:
    inset 0 -1px 0 rgba(var(--link-pigment),.18),
    inset 0 0 0 1px rgba(255,255,255,.16);

  /* angular "paper-cut" corner */
  clip-path: polygon(var(--cut-sm) 0, 100% 0, 100% calc(100% - var(--cut-sm)), calc(100% - var(--cut-sm)) 100%, 0 100%, 0 var(--cut-sm));

  transition: background-color .18s ease, box-shadow .18s ease, color .18s ease, border-color .18s ease, transform .18s ease;
}

nav ul li a::after{
  content:"";
  position:absolute;
  left:0;
  right:0;
  bottom:0;
  height:2px;
  background:linear-gradient(90deg,
    rgba(var(--gold-rgb),.62),
    rgba(var(--link-pigment),.10),
    rgba(var(--gold-rgb),.62));
  opacity:.42;
  pointer-events:none;
}

/* Summer: bridge gold ↔ indigo with teal for calmer harmony */
html[data-season="summer"] nav ul li a::after{
  background:linear-gradient(90deg,
    rgba(var(--gold-rgb),.56),
    rgba(var(--spot2),.12),
    rgba(var(--spot1),.08),
    rgba(var(--gold-rgb),.56));
  opacity:.44;
}

nav ul li a:hover{
  background:rgba(var(--link-pigment),.06);
  border-color:rgba(var(--gold-rgb),.32);
  box-shadow:
    0 12px 28px rgba(15,27,51,.10),
    inset 0 -2px 0 rgba(var(--link-pigment),.22),
    inset 0 0 0 1px rgba(255,255,255,.16);
  transform:translateY(-1px);
}

nav ul li a:hover::after{ opacity:.72; }

.menu-toggle{
  position:absolute;
  right:14px;
  top:10px;
  display:none;
  padding:10px 12px;
  border-radius:0;
  border:1px solid rgba(28,42,74,.16);
  background:rgba(255,255,255,.78);
  color:var(--indigo-2);
  font-size:1.05rem;
  cursor:pointer;
  z-index:2;
}

/* =========================
   Content
   ========================= */
.container{
  width:min(92%, var(--content));
  margin:34px auto 0;
  padding-bottom:38px;
}

.section{
  position:relative;
  overflow:hidden;
  background:rgba(255,255,255,.72);
  border:1px solid rgba(28,42,74,.12);
  border-radius:var(--radius);
  padding:28px 26px;
  margin:22px 0;
  box-shadow:var(--shadow);
}

.section::before{
  content:"";
  position:absolute;
  inset:-1px;
  background-image:var(--washi);
  background-size:720px 720px;
  opacity:.18;
  pointer-events:none;
  mix-blend-mode:multiply;
}

.section::after{
  content:"";
  position:absolute;
  left:0;
  top:0;
  bottom:0;
  width:4px;
  background:linear-gradient(180deg,
    rgba(var(--gold-rgb),.78),
    rgba(var(--spot1),.40),
    rgba(var(--gold-rgb),.62));
  pointer-events:none;
}

/* Summer: keep the same geometry, but insert a teal bridge so blue ↔ gold feels quieter */
html[data-season="summer"] .section::after{
  background:linear-gradient(180deg,
    rgba(var(--gold-rgb),.74),
    rgba(var(--spot2),.32),
    rgba(var(--spot1),.22),
    rgba(var(--gold-rgb),.62));
}

.section > *{
  position:relative;
  z-index:1;
}

.section h2{
  margin:0 0 14px;
  font-family:'Kaisei Opti','Noto Serif JP',"Yu Mincho","Hiragino Mincho ProN",serif;
  font-size:1.55rem;
  color:var(--indigo-2);
  letter-spacing:.02em;
  display:flex;
  align-items:baseline;
  gap:10px;
}

.section h2::before{
  content:"◆";
  color:rgba(var(--spot1),1);
  font-size:.85em;
  transform:translateY(-1px);
}

.section h2::after{
  content:"";
  flex:1;
  height:1px;
  margin-left:10px;
  background:linear-gradient(90deg, rgba(var(--gold-rgb),.70), rgba(var(--spot1),.28), transparent);
}

html[data-season="summer"] .section h2::after{
  background:linear-gradient(90deg,
    rgba(var(--gold-rgb),.64),
    rgba(var(--spot2),.18),
    rgba(var(--spot1),.20),
    transparent);
}

.section h3{
  margin:18px 0 8px;
  font-size:1.05rem;
  color:var(--indigo);
  letter-spacing:.01em;
}

.section ul{
  margin:10px 0 0 1.1em;
  padding:0;
}

.section li{
  margin:6px 0;
}

.section p{
  margin:10px 0;
}

/* =========================
   Publications (more scannable)
   ========================= */
#publications .pub-entry{
  position:relative;
  margin:12px 0;
  padding:12px 14px;
  display:grid;
  grid-template-columns:3.9rem 1fr;
  gap:14px;
  align-items:start;

  background:rgba(255,255,255,.58);
  border:1px solid rgba(28,42,74,.10);
  box-shadow:
    inset 0 -1px 0 rgba(var(--gold-rgb),.10),
    inset 0 0 0 1px rgba(255,255,255,.10);

  /* angular "paper-cut" corner */
  clip-path: polygon(var(--cut-sm) 0, 100% 0, 100% calc(100% - var(--cut-sm)), calc(100% - var(--cut-sm)) 100%, 0 100%, 0 var(--cut-sm));

  transition: transform .18s ease, box-shadow .18s ease, background-color .18s ease, border-color .18s ease;
}

#publications .pub-entry::after{
  content:"";
  position:absolute;
  left:12px;
  right:12px;
  bottom:0;
  height:2px;
  background:linear-gradient(90deg,
    rgba(var(--gold-rgb),.46),
    rgba(var(--link-pigment),.12),
    rgba(var(--gold-rgb),.46));
  opacity:.18;
  pointer-events:none;
}

/* Summer: blue ↔ gold lines get a teal bridge (less "complementary clash") */
html[data-season="summer"] #publications .pub-entry::after{
  background:linear-gradient(90deg,
    rgba(var(--gold-rgb),.40),
    rgba(var(--spot2),.14),
    rgba(var(--spot1),.10),
    rgba(var(--gold-rgb),.40));
}

#publications .pub-entry.is-clickable{
  cursor:pointer;
}

#publications .pub-entry.is-clickable:hover{
  transform:translateY(-1px);
  background:rgba(255,255,255,.62);
  border-color:rgba(var(--gold-rgb),.28);
  box-shadow:
    0 18px 44px rgba(15,27,51,.14),
    inset 0 -1px 0 rgba(var(--gold-rgb),.12),
    inset 0 0 0 1px rgba(255,255,255,.10);
}

#publications .pub-entry.is-clickable:hover::after{
  opacity:.46;
}

#publications .pub-entry.is-clickable:focus-visible{
  outline:2px solid rgba(var(--gold-rgb),.42);
  outline-offset:4px;
}

#publications .pub-index{
  align-self:start;
  display:inline-flex;
  justify-content:center;
  align-items:center;
  height:2.2rem;
  width:3.9rem;
  font-family:'Kaisei Opti','Noto Serif JP',"Yu Mincho","Hiragino Mincho ProN",serif;
  font-weight:600;
  font-variant-numeric: tabular-nums;
  letter-spacing:.02em;

  color: color-mix(in srgb, var(--indigo-2) 86%, rgba(var(--spot1),1) 14%);
  background:linear-gradient(180deg, rgba(255,255,255,.88), rgba(var(--gold-rgb),.08));
  border:1px solid rgba(var(--gold-rgb),.30);
  box-shadow:
    inset 0 -1px 0 rgba(var(--gold-rgb),.18),
    inset 0 0 0 1px rgba(255,255,255,.10);

  /* refined octagon (better proportions than pixel-cut on small badges) */
  clip-path: polygon(12% 0, 88% 0, 100% 24%, 100% 76%, 88% 100%, 12% 100%, 0 76%, 0 24%);
  position:relative;
}

/* subtle inner keyline (Masahiro-Maruyama-ish precision) */
#publications .pub-index::after{
  content:"";
  position:absolute;
  inset:3px;
  border:1px solid rgba(var(--gold-rgb),.16);
  clip-path: polygon(12% 0, 88% 0, 100% 24%, 100% 76%, 88% 100%, 12% 100%, 0 76%, 0 24%);
  opacity:.95;
  pointer-events:none;
}

#publications .pub-content{ display:block; }

/* Highlight the author's name (kept as <u> in HTML) */
#publications .pub-entry u{
  text-decoration:none;
  font-weight:750;
  padding:0 .06em .10em;
  background-image: linear-gradient(90deg, rgba(var(--gold-rgb),.50), rgba(var(--spot1),.22), transparent);
  background-repeat:no-repeat;
  background-size:100% 2px;
  background-position:0 100%;
}

html[data-season="summer"] #publications .pub-entry u{
  background-image: linear-gradient(90deg,
    rgba(var(--gold-rgb),.46),
    rgba(var(--spot2),.18),
    rgba(var(--spot1),.14),
    transparent);
}

/* Publication links as small "tags" (override global link underline motif) */
#publications .pub-entry a{
  background-image:none;
  box-shadow:none;
  padding:.06em .50em;
  margin-left:.12em;
  border:1px solid rgba(var(--gold-rgb),.22);
  background:rgba(255,255,255,.34);
  color: color-mix(in srgb, var(--ink) 82%, rgba(var(--link-pigment),1) 18%);
  font-size:.88em;
  font-weight:650;
  letter-spacing:.02em;
  text-decoration:none;
  display:inline-block;
  vertical-align:baseline;
  clip-path: polygon(var(--cut-sm) 0, 100% 0, 100% calc(100% - var(--cut-sm)), calc(100% - var(--cut-sm)) 100%, 0 100%, 0 var(--cut-sm));
  box-decoration-break:clone;

  transition: background-color .18s ease, border-color .18s ease, transform .18s ease, box-shadow .18s ease, color .18s ease;
}

#publications .pub-entry a:hover{
  background:rgba(var(--link-pigment),.06);
  border-color:rgba(var(--gold-rgb),.34);
  box-shadow:0 12px 26px rgba(15,27,51,.10), inset 0 -2px 0 rgba(var(--link-pigment),.18);
  transform:translateY(-1px);
}

#publications .pub-entry a:focus-visible{
  outline:2px solid rgba(var(--gold-rgb),.42);
  outline-offset:3px;
}

/* =========================
   Projects / Teaching / Activities (scannable cards)
   - keep the outer card cut-corner shape
   - vary badge geometry + accent placement per section
   ========================= */

/* Base card (shared) */
.section .item-entry{
  position:relative;
  margin:12px 0;
  padding:12px 14px;
  display:grid;
  gap:14px;
  align-items:start;

  background:rgba(255,255,255,.56);
  border:1px solid rgba(28,42,74,.10);
  box-shadow:
    inset 0 -1px 0 rgba(var(--gold-rgb),.08),
    inset 0 0 0 1px rgba(255,255,255,.10);

  clip-path: polygon(var(--cut-sm) 0, 100% 0, 100% calc(100% - var(--cut-sm)), calc(100% - var(--cut-sm)) 100%, 0 100%, 0 var(--cut-sm));
  transition: transform .18s ease, box-shadow .18s ease, background-color .18s ease, border-color .18s ease;
}

.section .item-entry.is-clickable{ cursor:pointer; }

.section .item-entry.is-clickable:hover{
  transform:translateY(-1px);
  border-color:rgba(var(--gold-rgb),.26);
  background:rgba(255,255,255,.60);
  box-shadow:
    0 18px 44px rgba(15,27,51,.14),
    inset 0 -1px 0 rgba(var(--gold-rgb),.10),
    inset 0 0 0 1px rgba(255,255,255,.10);
}

.section .item-entry.is-clickable:focus-visible{
  outline:2px solid rgba(var(--gold-rgb),.42);
  outline-offset:4px;
}

.section .item-body{ display:block; }

/* Base badge (shared) */
.section .item-badge{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  font-family:'Kaisei Opti','Noto Serif JP',"Yu Mincho","Hiragino Mincho ProN",serif;
  font-weight:650;
  letter-spacing:.02em;
  color: color-mix(in srgb, var(--indigo-2) 86%, rgba(var(--spot1),1) 14%);
  background:linear-gradient(180deg, rgba(255,255,255,.86), rgba(var(--gold-rgb),.06));
  border:1px solid rgba(var(--gold-rgb),.24);
  box-shadow: inset 0 -1px 0 rgba(var(--gold-rgb),.14);
}

/* ---- Projects: timeline-like (date stacked) ---- */
#projects .item-entry{ grid-template-columns:5.2rem 1fr; }

#projects .item-entry::after{
  content:"";
  position:absolute;
  left:0;
  top:0;
  bottom:0;
  width:3px;
  background:linear-gradient(180deg,
    rgba(var(--gold-rgb),.70),
    rgba(var(--spot1),.30),
    rgba(var(--gold-rgb),.58));
  opacity:.62;
  pointer-events:none;
}

html[data-season="summer"] #projects .item-entry::after{
  background:linear-gradient(180deg,
    rgba(var(--gold-rgb),.66),
    rgba(var(--spot2),.28),
    rgba(var(--spot1),.20),
    rgba(var(--gold-rgb),.54));
}

#projects .item-entry.item-kind-co::after{
  background:linear-gradient(180deg,
    rgba(var(--gold-rgb),.64),
    rgba(var(--spot2),.26),
    rgba(var(--gold-rgb),.54));
  opacity:.54;
}

#projects .item-entry.item-kind-prize::after{ opacity:.78; }

#projects .item-badge{
  width:5.2rem;
  min-height:2.55rem;
  padding:6px 10px;
  flex-direction:column;
  gap:4px;

  /* opposite-corner chamfer (subtle asymmetry) */
  clip-path: polygon(0 0, calc(100% - var(--cut-sm)) 0, 100% var(--cut-sm), 100% 100%, var(--cut-sm) 100%, 0 calc(100% - var(--cut-sm)));
  position:relative;
}

#projects .item-badge::after{
  content:"";
  position:absolute;
  inset:3px;
  border:1px solid rgba(var(--gold-rgb),.14);
  clip-path: polygon(0 0, calc(100% - var(--cut-sm)) 0, 100% var(--cut-sm), 100% 100%, var(--cut-sm) 100%, 0 calc(100% - var(--cut-sm)));
  opacity:.90;
  pointer-events:none;
}

#projects .item-badge .badge-top,
#projects .item-badge .badge-bot{
  font-family:'Noto Sans JP', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
  font-weight:750;
  font-variant-numeric: tabular-nums;
  letter-spacing:.02em;
  font-size:.78rem;
}

#projects .item-badge .badge-bot{ opacity:.72; }

#projects .item-badge .badge-line{
  width:66%;
  height:1px;
  background:linear-gradient(90deg, transparent, rgba(var(--gold-rgb),.44), transparent);
  opacity:.70;
}

/* Prize badge: centered label (kept minimal) */
#projects .item-entry.item-kind-prize .item-badge{
  flex-direction:row;
  gap:0;
}

/* Ikushi Prize: when the inline [link] tag is removed, keep an unmistakable (but subtle) button cue */
#projects .item-entry.item-kind-prize.is-clickable::before{
  content:"↗";
  position:absolute;
  right:14px;
  top:12px;
  font-size:.95rem;
  color: color-mix(in srgb, rgba(var(--spot1),1) 60%, rgba(var(--gold-rgb),1) 40%);
  opacity:0;
  transform:translateY(2px);
  transition: opacity .18s ease, transform .18s ease;
  pointer-events:none;
}

#projects .item-entry.item-kind-prize.is-clickable:hover::before,
#projects .item-entry.item-kind-prize.is-clickable:focus-visible::before{
  opacity:.62;
  transform:translateY(0);
}

#projects .item-entry.item-kind-prize.is-clickable:hover .item-badge{
  border-color:rgba(var(--gold-rgb),.34);
  box-shadow:
    0 12px 28px rgba(15,27,51,.12),
    inset 0 -1px 0 rgba(var(--gold-rgb),.16);
}

/* ---- Teaching: label badge on the right ---- */
#teaching .item-entry{
  grid-template-columns:1fr max-content;
  gap:12px;
}

#teaching .item-body{ order:1; }
#teaching .item-badge{ order:2; justify-self:end; align-self:start; }

#teaching .item-entry::after{
  content:"";
  position:absolute;
  left:12px;
  right:12px;
  top:0;
  height:2px;
  background:linear-gradient(90deg,
    rgba(var(--gold-rgb),.54),
    rgba(var(--spot1),.22),
    rgba(var(--gold-rgb),.54));
  opacity:.22;
  pointer-events:none;
}

html[data-season="summer"] #teaching .item-entry::after{
  background:linear-gradient(90deg,
    rgba(var(--gold-rgb),.48),
    rgba(var(--spot2),.16),
    rgba(var(--spot1),.14),
    rgba(var(--gold-rgb),.48));
}

#teaching .item-badge{
  padding:7px 12px;
  min-height:2.1rem;
  font-size:.86rem;

  /* arrow-chamfer label */
  clip-path: polygon(0 0, calc(100% - var(--cut-sm)) 0, 100% 50%, calc(100% - var(--cut-sm)) 100%, 0 100%, var(--cut-sm) 50%);
  position:relative;
}

#teaching .item-badge::after{
  content:"";
  position:absolute;
  inset:3px;
  border:1px solid rgba(var(--gold-rgb),.14);
  clip-path: polygon(0 0, calc(100% - var(--cut-sm)) 0, 100% 50%, calc(100% - var(--cut-sm)) 100%, 0 100%, var(--cut-sm) 50%);
  opacity:.88;
  pointer-events:none;
}

/* ---- Activities: compact badge on the left + thin top-right rule ---- */
#activities .item-entry{ grid-template-columns:4.2rem 1fr; }

#activities .item-entry::after{
  content:"";
  position:absolute;
  right:14px;
  top:12px;
  width:46%;
  height:1px;
  background:linear-gradient(90deg,
    transparent,
    rgba(var(--gold-rgb),.38),
    rgba(var(--spot2),.18));
  opacity:.34;
  pointer-events:none;
}

#activities .item-badge{
  width:4.2rem;
  min-height:2.2rem;
  padding:6px 10px;
  font-size:.86rem;
  clip-path: polygon(var(--cut-sm) 0, 100% 0, 100% calc(100% - var(--cut-sm)), calc(100% - var(--cut-sm)) 100%, 0 100%, 0 var(--cut-sm));
  position:relative;
}

#activities .item-badge::after{
  content:"";
  position:absolute;
  inset:3px;
  border:1px solid rgba(var(--gold-rgb),.14);
  clip-path: polygon(var(--cut-sm) 0, 100% 0, 100% calc(100% - var(--cut-sm)), calc(100% - var(--cut-sm)) 100%, 0 100%, 0 var(--cut-sm));
  opacity:.88;
  pointer-events:none;
}

#activities .item-entry.item-kind-review::after{
  background:linear-gradient(90deg,
    transparent,
    rgba(var(--gold-rgb),.38),
    rgba(var(--spot3),.18));
}


/* Activities: refine Review items into "Review (Conference)" / "Review (Journal)" (without breaking the card geometry) */
#activities .item-entry.item-kind-review{
  grid-template-columns:5.8rem 1fr;
}

#activities .item-entry.item-kind-review .item-badge{
  width:5.8rem;
  flex-direction:column;
  gap:2px;
  line-height:1.05;
  padding:6px 10px;
}

#activities .item-entry.item-kind-review .item-badge .badge-top{
  font-size:.80rem;
}

#activities .item-entry.item-kind-review .item-badge .badge-bot{
  font-size:.68rem;
  opacity:.80;
}

/* Activities: make the "Math on Difficulties..." talk feel as clickable as Publications (subtle bottom rule + clearer hover cue) */
#activities .item-entry.item-kind-talk.is-clickable{
  background-image: linear-gradient(90deg,
    rgba(var(--gold-rgb),.34),
    rgba(var(--spot2),.12),
    rgba(var(--gold-rgb),.34));
  background-repeat:no-repeat;
  background-size: calc(100% - 28px) 2px;
  background-position: 14px calc(100% - 1px);
}

#activities .item-entry.item-kind-talk.is-clickable:hover{
  background-image: linear-gradient(90deg,
    rgba(var(--gold-rgb),.46),
    rgba(var(--spot2),.18),
    rgba(var(--gold-rgb),.46));
}

#activities .item-entry.item-kind-talk.is-clickable:hover::after,
#activities .item-entry.item-kind-talk.is-clickable:focus-visible::after{
  opacity:.60;
}

/* A small external-link cue (kept quiet; appears on hover/focus) */
#activities .item-entry.item-kind-talk.is-clickable::before{
  content:"↗";
  position:absolute;
  right:14px;
  top:10px;
  font-size:.95rem;
  color: color-mix(in srgb, rgba(var(--spot2),1) 55%, rgba(var(--gold-rgb),1) 45%);
  opacity:0;
  transform:translateY(2px);
  transition: opacity .18s ease, transform .18s ease;
  pointer-events:none;
}

#activities .item-entry.item-kind-talk.is-clickable:hover::before,
#activities .item-entry.item-kind-talk.is-clickable:focus-visible::before{
  opacity:.62;
  transform:translateY(0);
}

/* Projects: Ikushi Prize should also highlight like Publications (subtle bottom rule + stronger left accent on hover) */
#projects .item-entry.item-kind-prize.is-clickable{
  background-image: linear-gradient(90deg,
    rgba(var(--gold-rgb),.34),
    rgba(var(--spot1),.12),
    rgba(var(--gold-rgb),.34));
  background-repeat:no-repeat;
  background-size: calc(100% - 28px) 2px;
  background-position: 14px calc(100% - 1px);
}

#projects .item-entry.item-kind-prize.is-clickable:hover{
  background-image: linear-gradient(90deg,
    rgba(var(--gold-rgb),.50),
    rgba(var(--spot1),.16),
    rgba(var(--gold-rgb),.50));
}

#projects .item-entry.item-kind-prize.is-clickable:hover::after,
#projects .item-entry.item-kind-prize.is-clickable:focus-visible::after{
  opacity:.98;
  width:4px;
}



/* ------------------------------------------------------------------ */
/* Match Publications glow for selected cards (Ikushi Prize / recorded talk) */
/* ------------------------------------------------------------------ */
.section .item-entry.glow-like-pub .card-glowline{
  position:absolute;
  left:12px;
  right:12px;
  bottom:0;
  height:2px;
  background:linear-gradient(90deg,
    rgba(var(--gold-rgb),.46),
    rgba(var(--link-pigment),.12),
    rgba(var(--gold-rgb),.46));
  opacity:.18;
  pointer-events:none;
  transition: opacity .18s ease;
}

html[data-season="summer"] .section .item-entry.glow-like-pub .card-glowline{
  background:linear-gradient(90deg,
    rgba(var(--gold-rgb),.40),
    rgba(var(--spot2),.14),
    rgba(var(--spot1),.10),
    rgba(var(--gold-rgb),.40));
}

.section .item-entry.glow-like-pub.is-clickable:hover{
  background:rgba(255,255,255,.62);
  border-color:rgba(var(--gold-rgb),.28);
  box-shadow:
    0 18px 44px rgba(15,27,51,.14),
    inset 0 -1px 0 rgba(var(--gold-rgb),.12),
    inset 0 0 0 1px rgba(255,255,255,.10);
}

.section .item-entry.glow-like-pub.is-clickable:hover .card-glowline{
  opacity:.46;
}

/* Remove custom bottom-rule variants on these cards so the glow matches Publications */
#projects .item-entry.item-kind-prize.is-clickable.glow-like-pub,
#activities .item-entry.item-kind-talk.is-clickable.glow-like-pub{
  background-image:none;
}

#projects .item-entry.item-kind-prize.is-clickable.glow-like-pub:hover,
#activities .item-entry.item-kind-talk.is-clickable.glow-like-pub:hover{
  background-image:none;
}

/* Reset section-specific hover accents so they don't deviate from Publications */
#projects .item-entry.item-kind-prize.is-clickable.glow-like-pub:hover::after,
#projects .item-entry.item-kind-prize.is-clickable.glow-like-pub:focus-visible::after{
  width:3px;
  opacity:.62;
}

#activities .item-entry.item-kind-talk.is-clickable.glow-like-pub:hover::after,
#activities .item-entry.item-kind-talk.is-clickable.glow-like-pub:focus-visible::after{
  opacity:.34;
}

/* Keep the badge steady (avoid extra "badge-only" flare that Publications doesn't have) */
#projects .item-entry.item-kind-prize.is-clickable.glow-like-pub:hover .item-badge,
#projects .item-entry.item-kind-prize.is-clickable.glow-like-pub:focus-visible .item-badge{
  border-color:rgba(var(--gold-rgb),.24);
  box-shadow: inset 0 -1px 0 rgba(var(--gold-rgb),.14);
}

/* Inline links — Rinpa harmony (minimum affordance) */
a{
  /* fallback first */
  color:rgb(var(--link-rgb));
  color: color-mix(in srgb, var(--ink) 86%, rgba(var(--link-pigment),1) 14%);
  text-decoration:none;

  /* triple line: gold + pigment + secondary pigment */
  background-image:
    linear-gradient(90deg, rgba(var(--gold-rgb),.52), rgba(var(--gold-rgb),.08)),
    linear-gradient(90deg, rgba(var(--link-pigment),.26), rgba(var(--link-pigment),.03)),
    linear-gradient(90deg, rgba(var(--link-pigment-2),.16), rgba(var(--link-pigment-2),.02));
  background-repeat:no-repeat;
  background-size:100% 1px, 100% 1px, 100% 1px;
  background-position:0 100%, 0 calc(100% - 3px), 0 calc(100% - 6px);

  padding-bottom:.14em;
  box-decoration-break:clone;

  transition: color .22s ease, background-image .22s ease, box-shadow .22s ease;
}

a:visited{
  color:rgb(var(--link-rgb));
  color: color-mix(in srgb, var(--ink) 86%, rgba(var(--link-pigment),1) 14%);
}

a:hover{
  color: color-mix(in srgb, var(--ink) 80%, rgba(var(--link-pigment),1) 20%);
  background-image:
    linear-gradient(90deg, rgba(var(--gold-rgb),.74), rgba(var(--gold-rgb),.14)),
    linear-gradient(90deg, rgba(var(--link-pigment),.34), rgba(var(--link-pigment),.06)),
    linear-gradient(90deg, rgba(var(--link-pigment-2),.20), rgba(var(--link-pigment-2),.04));
  box-shadow: inset 0 -0.55em 0 rgba(var(--gold-rgb),.05);
}

.section a:hover{
  box-shadow:
    inset 0 -0.55em 0 rgba(var(--gold-rgb),.06),
    inset 0 -1.10em 0 rgba(var(--link-pigment),.03);
}

a:focus-visible{
  outline:2px solid rgba(var(--gold-rgb),.40);
  outline-offset:3px;
  border-radius:0;
}

nav a:focus-visible{ border-radius:0; }

/* =========================
   Footer + theme switcher
   ========================= */
footer{
  text-align:center;
  padding:26px 16px 34px;
  color:var(--muted);
  background:rgba(255,255,255,.52);
  border-top:1px solid rgba(28,42,74,.14);
  backdrop-filter: blur(10px) saturate(1.1);
  -webkit-backdrop-filter: blur(10px) saturate(1.1);
}

.season-switcher{
  width:min(92%, var(--content));
  margin:0 auto 14px;
  border-radius:var(--radius);
  border:1px solid rgba(28,42,74,.12);
  background:rgba(255,255,255,.58);
  box-shadow:0 14px 34px rgba(15,27,51,.10);
  padding:10px 12px;
  text-align:left;
  position:relative;
  overflow:hidden;
}

.season-switcher::before{
  content:"";
  position:absolute;
  inset:-1px;
  background-image:var(--washi);
  background-size:720px 720px;
  opacity:.16;
  mix-blend-mode:multiply;
  pointer-events:none;
}

.season-switcher > *{ position:relative; z-index:1; }

.season-switcher summary{
  cursor:pointer;
  font-weight:700;
  color:var(--indigo-2);
  padding:8px 10px;
  border-radius:0;
  list-style:none;
}

.season-switcher summary::-webkit-details-marker{ display:none; }

.season-buttons{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  justify-content:center;
  padding:10px 8px 0;
}

.season-btn{
  border:1px solid rgba(28,42,74,.14);
  background:rgba(251,248,242,.84);
  color:var(--indigo-2);
  border-radius:0;
  padding:8px 12px;
  font-weight:700;
  cursor:pointer;
  transition:transform .16s ease, background-color .16s ease, box-shadow .16s ease, border-color .16s ease;
}

.season-btn:hover{ transform:translateY(-1px); }

.season-btn.active{
  background:rgba(var(--spot1),.14);
  border-color:rgba(var(--spot1),.34);
  box-shadow:0 14px 30px rgba(15,27,51,.12);
}

.season-caption{
  margin:10px 8px 8px;
  font-size:.92rem;
  line-height:1.6;
}

.footer-note{
  margin:0;
  font-size:.95rem;
  opacity:.92;
  text-align:center;
}

/* =========================
   Responsive
   ========================= */
@media (max-width: 768px) {
  nav{ min-height:58px; }

  nav ul{
    flex-direction:column;
    align-items:stretch;
    display:none;
    padding:12px 14px 16px;
  }

  nav ul.active{ display:flex; }

  nav ul li a{
    border-radius:0;
    background:rgba(255,255,255,.34);
    border:1px solid rgba(var(--gold-rgb),.22);
  }

  .menu-toggle{ display:block; }

  .container{ width:min(94%, var(--content)); }
  .section{ padding:22px 18px; }
  .header-panel{ padding:20px 16px 16px; }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  html{ scroll-behavior:auto; }
  *{
    transition:none !important;
    animation:none !important;
  }
}

/* =========================
   Dark mode
   ========================= */
@media (prefers-color-scheme: dark) {
  :root{
    --paper:#0f1626;
    --paper-2:#0f1626;
    --ink:#eef0f4;
    --muted:rgba(238,240,244,.74);

    --indigo:#cfd7e6;
    --indigo-2:#eef0f4;

    --line:rgba(238,240,244,.14);
    --shadow:0 18px 52px rgba(0,0,0,.42);
    --motif:url('motif-winter-dark.svg');
  }

  /* Season-specific backdrops for dark mode */
  html[data-season="spring"]{ --backdrop:url('backdrop-spring-dark.svg'); --motif:url('motif-spring-dark.svg'); }
  html[data-season="summer"]{ --backdrop:url('backdrop-summer-dark.svg'); --motif:url('motif-summer-dark.svg'); }
  html[data-season="autumn"]{ --backdrop:url('backdrop-autumn-dark.svg'); --motif:url('motif-autumn-dark.svg'); }
  html[data-season="winter"]{ --backdrop:url('backdrop-winter-dark.svg'); --motif:url('motif-winter-dark.svg'); }

  .site-bg::before{
    opacity:.42;
    mix-blend-mode:screen;
  }

  .site-bg::after{
    opacity:.22;
    mix-blend-mode:screen;
  }

  .motif-layer{
    /* Make the seasonal Hoitsu motifs perceivable even on dark paper */
    opacity:.46;
    mix-blend-mode:screen;
    filter:saturate(1.10) contrast(1.12);
  }


  .header-panel{
    background:rgba(15,22,38,.72);
    border:1px solid rgba(238,240,244,.14);
    box-shadow:0 22px 68px rgba(0,0,0,.38);
  }

  .header-panel::before{
    opacity:.18;
    mix-blend-mode:screen;
  }

  .season-badge{
    background:rgba(15,22,38,.72);
    border:1px solid rgba(238,240,244,.14);
    box-shadow:0 16px 40px rgba(0,0,0,.34);
  }

  nav{
    background:rgba(15,22,38,.72);
    border-bottom:1px solid rgba(238,240,244,.12);
  }
  nav::before{ opacity:.10; mix-blend-mode:screen; }

  nav ul li a{
    color:rgba(238,240,244,.92); /* fallback */
    color: color-mix(in srgb, rgba(238,240,244,.92) 88%, rgba(var(--link-pigment),1) 12%);
    background:rgba(15,22,38,.50);
    border:1px solid rgba(var(--gold-rgb),.18);
    box-shadow:
      inset 0 -1px 0 rgba(var(--link-pigment),.20),
      inset 0 0 0 1px rgba(0,0,0,.22);
  }
  nav ul li a::after{
    opacity:.36;
  }
  nav ul li a:hover{
    color:rgba(238,240,244,1);
    background:rgba(var(--link-pigment),.12);
    border-color:rgba(var(--gold-rgb),.26);
    box-shadow:
      0 14px 32px rgba(0,0,0,.38),
      inset 0 -2px 0 rgba(var(--link-pigment),.26),
      inset 0 0 0 1px rgba(0,0,0,.22);
  }
  nav ul li a:hover::after{ opacity:.70; }

  .menu-toggle{
    background:rgba(15,22,38,.92);
    color:rgba(238,240,244,.95);
    border:1px solid rgba(238,240,244,.14);
  }

  .section{
    background:rgba(15,22,38,.72);
    border:1px solid rgba(238,240,244,.12);
  }

  /* Publications in dark mode */
  #publications .pub-entry{
    background:rgba(15,22,38,.66);
    border:1px solid rgba(238,240,244,.12);
    box-shadow:
      inset 0 -1px 0 rgba(var(--gold-rgb),.10),
      inset 0 0 0 1px rgba(0,0,0,.24);
  }
  #publications .pub-index{
    background:linear-gradient(180deg, rgba(15,22,38,.92), rgba(var(--gold-rgb),.10));
    border:1px solid rgba(var(--gold-rgb),.22);
    color:rgba(238,240,244,.92);
  }
  #publications .pub-entry a{
    background:rgba(15,22,38,.78);
    border:1px solid rgba(var(--gold-rgb),.18);
    color: color-mix(in srgb, rgba(238,240,244,.92) 88%, rgba(var(--link-pigment),1) 12%);
  }
  #publications .pub-entry a:hover{
    background:rgba(var(--link-pigment),.12);
    border-color:rgba(var(--gold-rgb),.26);
    box-shadow:0 14px 30px rgba(0,0,0,.40), inset 0 -2px 0 rgba(var(--link-pigment),.22);
  }

  /* Projects / Teaching / Activities item cards in dark mode */
  .section .item-entry{
    background:rgba(15,22,38,.66);
    border:1px solid rgba(238,240,244,.12);
    box-shadow:
      inset 0 -1px 0 rgba(var(--gold-rgb),.10),
      inset 0 0 0 1px rgba(0,0,0,.24);
  }

  .section .item-entry.is-clickable:hover{
    background:rgba(15,22,38,.74);
    border-color:rgba(var(--gold-rgb),.24);
    box-shadow:
      0 18px 44px rgba(0,0,0,.40),
      inset 0 -1px 0 rgba(var(--gold-rgb),.12),
      inset 0 0 0 1px rgba(0,0,0,.24);
  }

  .section .item-badge{
    background:linear-gradient(180deg, rgba(15,22,38,.92), rgba(var(--gold-rgb),.10));
    border:1px solid rgba(var(--gold-rgb),.20);
    color: color-mix(in srgb, rgba(238,240,244,.92) 88%, rgba(var(--spot1),1) 12%);
  }

  .section::before{
    opacity:.12;
    mix-blend-mode:screen;
  }

  footer{
    background:rgba(15,22,38,.72);
    color:rgba(238,240,244,.72);
    border-top:1px solid rgba(238,240,244,.12);
  }

  .season-switcher{
    background:rgba(15,22,38,.66);
    border:1px solid rgba(238,240,244,.12);
  }

  .season-switcher::before{
    opacity:.12;
    mix-blend-mode:screen;
  }

  .season-btn{
    background:rgba(15,22,38,.92);
    border:1px solid rgba(238,240,244,.14);
    color:rgba(238,240,244,.92);
  }

  .season-btn.active{
    background:rgba(var(--spot1),.18);
    border-color:rgba(var(--spot1),.42);
  }

  a{
    color:rgba(238,240,244,.90); /* fallback */
    color: color-mix(in srgb, rgba(238,240,244,.92) 88%, rgba(var(--link-pigment),1) 12%);
    background-image:
      linear-gradient(90deg, rgba(var(--gold-rgb),.48), rgba(var(--gold-rgb),.12)),
      linear-gradient(90deg, rgba(var(--link-pigment),.30), rgba(var(--link-pigment),.06)),
      linear-gradient(90deg, rgba(var(--link-pigment-2),.20), rgba(var(--link-pigment-2),.04));
  }
  a:visited{
    color:rgba(238,240,244,.90);
    color: color-mix(in srgb, rgba(238,240,244,.92) 88%, rgba(var(--link-pigment),1) 12%);
  }
  a:hover{
    color:rgba(238,240,244,1);
    color: color-mix(in srgb, rgba(238,240,244,1) 84%, rgba(var(--link-pigment),1) 16%);
    background-image:
      linear-gradient(90deg, rgba(var(--gold-rgb),.70), rgba(var(--gold-rgb),.18)),
      linear-gradient(90deg, rgba(var(--link-pigment),.40), rgba(var(--link-pigment),.10)),
      linear-gradient(90deg, rgba(var(--link-pigment-2),.26), rgba(var(--link-pigment-2),.06));
    box-shadow: inset 0 -0.55em 0 rgba(var(--gold-rgb),.08);
  }
  .section a:hover{
    box-shadow:
      inset 0 -0.55em 0 rgba(var(--gold-rgb),.09),
      inset 0 -1.10em 0 rgba(var(--link-pigment),.05);
  }
}
